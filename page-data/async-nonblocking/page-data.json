{"componentChunkName":"component---src-templates-blog-post-js","path":"/async-nonblocking/","result":{"data":{"site":{"siteMetadata":{"title":"Backend Developer Donsdev","author":"Donsdev"}},"markdownRemark":{"id":"fc95bd4d-50e4-5dac-bcbf-363665ab4545","excerpt":"Sync vs Async 수많은 글을 읽어 보고 제가 느낀 동기와 비동기의 차이는 서브루틴의 결과값을 다루는 방식 이며, 서브루틴의 순서가 보장되는지 여부 입니다. SYNC (동기) 메인루틴 에서 A, B, C…","html":"<h2>Sync vs Async</h2>\n<p>수많은 글을 읽어 보고 제가 느낀 동기와 비동기의 차이는 <strong>서브루틴의 결과값을 다루는 방식</strong> 이며, <strong>서브루틴의 순서가 보장되는지 여부</strong> 입니다.</p>\n<h3>SYNC (동기)</h3>\n<p><strong>메인루틴</strong> 에서 <strong>A, B, C 작업 (서브루틴)</strong> 을 순서대로 호출한다고 가정 했을 때, 동기 방식은 메인루틴이 서브루틴에게 결과를 질의하여 응답을 받는 방식입니다. 동기 방식에서 메인루틴은 각각의 서브루틴 (A, B, C) 의 결과를 순서대로 질의하며 코드 상에서 먼저 기입된 서브루틴의 값부터 차례대로 받아 봅니다.</p>\n<p>이렇게 되면 메인루틴의 흐름 내에서 서브루틴 작업의 순서가 <code class=\"language-text\">A -> B -> C</code> 로 보장 됩니다.</p>\n<h3>ASYNC (비동기)</h3>\n<p><strong>메인루틴</strong> 에서 <strong>A, B, C 작업 (서브루틴)</strong> 을 순서대로 호출한다고 가정 했을 때, 비동기 방식은 서브루틴이 메인루틴에게 callback 을 통하여 자신의 작업 결과를 알리는 방식입니다. 이 때 메인루틴은 서브루틴의 결과값에 관심을 두지 않고 서브루틴이 때가 되면 알려 주겠지 하고 자기 할일을 합니다. 당연히 서브루틴 A, B, C는 수행 시간이 다를 것이고, 누가 먼저인지에 상관 없이 메인루틴 A 에게 결과를 callback 으로 알릴 것입니다.</p>\n<p>이렇게 되면 동기 방식과 달리 A 작업의 흐름 내에서 서브루틴 작업의 순서가 <code class=\"language-text\">A -> B -> C</code> 로 보장되지 않습니다.</p>\n<h2>Blocking vs Non-Blocking</h2>\n<p>메인루틴에서 프로그램의 제어권이 서브루틴으로 넘어 왔을 때, 서브루틴이 작업이 완료되기 전이지만 제어권을 바로 메인 루틴에게 돌려주는지 혹은 작업이 끝날때까지 메인 루틴을 대기시키는지에 관한 내용입니다.</p>\n<p>통상적으로 <strong>Sync + Blocking</strong> / <strong>Async + Non-Blocking</strong> 방식의 조합으로 프로그램을 구성하기 때문에 두 짝궁의 개념이 혼동되는 경우가 많습니다.</p>\n<h3>Blocking</h3>\n<p>말 그대로 서브루틴이 메인루틴의 흐름을 Block 합니다. 즉 프로그램의 <strong>제어권</strong>을 메인루틴에게 바로 돌려주지 않고 서브루틴의 작업이 끝날 때 까지 대기시킵니다. 이 시간동안 메인루틴은 아무 작업도 할 수 없습니다.</p>\n<h3>Non-Blocking</h3>\n<p>블로킹 방식과 달리, 작업이 완료가 되지 않았어도 프로그램의 <strong>제어권</strong>을 메인루틴에게 바로 돌려줍니다. 바로 돌려주기 때문에 메인루틴은 서브루틴이 종료되지 않아도 자신이 할 일을 진행할 수 있습니다.</p>\n<h2>이 방식들의 조합</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 970px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2af61198057b79629ddc94d813534a4e/eb1d2/comb.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.25925925925925%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAC3UlEQVQoz2WTXVMaZxiG/Y096A/o9LRHnelBNJ2mByFJrWOaaDEkThAwQizKl4iAIB8RMTKijIlIMbKwrLsrLKwK4evKAOnYmbwzz7xn11z3c88zATAYDIYfvV6fm1aHbh/UmsYnoUJDv6Xd7XPb7tButxj0O1ypl1TKn1DkKp/bN3Q6bbrd7ogxMYT1+2NgRb3Gnylj8aV47Y5jtAcwrYZxJfNEchXKJzb2An+wG5jGbbvPumWKmPcxUvZvNCXPkDIxMmT8yorOWkbknjXLcqLIa18a514e1/sCm4dlrs+N2P4x4febiHt+JbL2gEziCc7wjzTl3BjYbrepShL1mkqhJBNcjxO3eAhEjtjK6RjDb3ganCOUVRGSBhZmpll8buA4OcNJ7Cmhjd8wOL9Dl0/GwGHkXq83MhQUnW1HiLjVhy+aYzVWZD5kYdo/zfaHGs3oQ1yTk5h++ZmM7xGp0F8s2e4xu/Y9qnQ03uH/SxHkJvaUwKT1GFuyxNtkkfV9AXemjGf/Aq1g4qXdhsX+gvODOeKbfxJyGRCPH1OTcneGg35/BLySRM62nbxbXSTtMrPjeDmarH+Fi5Sf7McIkYSddMZFNLHCRnBpNJmcH0WT7gz5aqhLJdSYjedzy+xYn5FzzvF+ZRZ5exFt9y2Fy2NehdNYwzESRzuED6KkPu5xUj1EbqhjoK7rqKpCvakjn+e5dDzjzDhDftWIvOPE7XqAL3AffddD8d8EC7YtFt94cYbXWfau4dnzMh+dQtG+AoeFdDqdUX5NvEAxP+Gz9RE3ETMcuNnYnMLs+onrfR/FtA+HYZ7k0hKXpXdUGmeki35+d/+AeFX9NnJTvKC8ZebVCwfn3gUUzwyCdxYpbkaO2TkT9pl1RHFuBRFO/Xw4dHF6GuSwFEOqy3eX8l/Lrdtb5LJAvlBBqVSoSSJ1SUSriqhiGbVRQ1BqSHWN2nUDtVGnpjeo601uWq0R8AsyVDp/wPhcnwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <picture>\n          <source\n              srcset=\"/static/2af61198057b79629ddc94d813534a4e/fc615/comb.avif 243w,\n/static/2af61198057b79629ddc94d813534a4e/b3175/comb.avif 485w,\n/static/2af61198057b79629ddc94d813534a4e/006d3/comb.avif 970w,\n/static/2af61198057b79629ddc94d813534a4e/b52ec/comb.avif 1455w,\n/static/2af61198057b79629ddc94d813534a4e/aa023/comb.avif 1622w\"\n              sizes=\"(max-width: 970px) 100vw, 970px\"\n              type=\"image/avif\"\n            /><source\n              srcset=\"/static/2af61198057b79629ddc94d813534a4e/0e3e2/comb.webp 243w,\n/static/2af61198057b79629ddc94d813534a4e/749af/comb.webp 485w,\n/static/2af61198057b79629ddc94d813534a4e/dbca2/comb.webp 970w,\n/static/2af61198057b79629ddc94d813534a4e/bda17/comb.webp 1455w,\n/static/2af61198057b79629ddc94d813534a4e/b3a72/comb.webp 1622w\"\n              sizes=\"(max-width: 970px) 100vw, 970px\"\n              type=\"image/webp\"\n            />\n          <source\n            srcset=\"/static/2af61198057b79629ddc94d813534a4e/8aea6/comb.png 243w,\n/static/2af61198057b79629ddc94d813534a4e/44c61/comb.png 485w,\n/static/2af61198057b79629ddc94d813534a4e/587b0/comb.png 970w,\n/static/2af61198057b79629ddc94d813534a4e/5b795/comb.png 1455w,\n/static/2af61198057b79629ddc94d813534a4e/eb1d2/comb.png 1622w\"\n            sizes=\"(max-width: 970px) 100vw, 970px\"\n            type=\"image/png\"\n          />\n          <img\n            class=\"gatsby-resp-image-image\"\n            src=\"/static/2af61198057b79629ddc94d813534a4e/587b0/comb.png\"\n            alt=\"비동기 / 동기 / 블로킹 / 논블로킹 조합\"\n            title=\"비동기 / 동기 / 블로킹 / 논블로킹 조합\"\n            loading=\"lazy\"\n            decoding=\"async\"\n            style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n          />\n        </picture>\n  </a>\n    </span></p>\n<p>그림 출처 : <a href=\"https://inpa.tistory.com/entry/%F0%9F%91%A9%E2%80%8D%F0%9F%92%BB-%EB%8F%99%EA%B8%B0%EB%B9%84%EB%8F%99%EA%B8%B0-%EB%B8%94%EB%A1%9C%ED%82%B9%EB%85%BC%EB%B8%94%EB%A1%9C%ED%82%B9-%EA%B0%9C%EB%85%90-%EC%A0%95%EB%A6%AC\">here</a></p>\n<h3>SYNC + Blocking</h3>\n<p>메인루틴이 서브루틴에게 처리 결과값을 질의하고, 제어권을 넘겨받은 서브루틴은 본인의 작업이 끝날 때 까지 제어권을 메인루틴에게 넘겨주지 않고 묵언 수행을 하다가 지 작업이 끝나서야 메인 루틴에게 결과값을 전달 합니다.</p>\n<p>서브 루틴의 순서가 보장됩니다.</p>\n<h3>SYNC + Non-Blocking</h3>\n<p>메인루틴이 서브루틴에게 처리 결과값을 질의하는 것은 1번 방식과 동일하지만, 2번 방식에서는 Non-Blocking 이기 때문에 서브루틴은 본인의 작업이 끝나지 않아도 메인 루틴에게 제어권을 바로 돌려줍니다.</p>\n<p>그러면 메인 루틴은 제어권을 받아 메인 루틴 내의 자기 할일을 하긴 하는데, Sync 방식이라 서브 루틴에게 계속 결과를 질의합니다.</p>\n<blockquote>\n<p>\"다 했어?\"</p>\n</blockquote>\n<p>아직 작업을 마치지 못한 서브루틴 A 는</p>\n<blockquote>\n<p>\"아직 안 했어 ㅡㅡ 기다려\"</p>\n</blockquote>\n<p>라고 대답할 것이고,</p>\n<p>순서가 보장되는 Sync 방식 메인루틴은 A 작업이 끝날때 까지 다른 서브루틴인 B, C 작업을 진행할 수 없기 때문에 A 작업이 끝날때까지 끈질기게 질의합니다.</p>\n<p>마침내 서브루틴 A가</p>\n<blockquote>\n<p>\"A 작업 끝났어 (오운완)\"</p>\n</blockquote>\n<p>하자마자 다른 서브루틴(B, C) 을 순차로 처리합니다.</p>\n<h3>ASYNC + Blocking</h3>\n<p>메인루틴은 서브루틴을 기다리지 않습니다. 다만 서브루틴이 종료될 때까지 프로그램의 제어권을 넘겨받지 못해 암것도 못합니다. 서브루틴 A가 콜백을 가져 갔으니 내가 신경쓸 필요 없다고 잘난척은 해 놨는데 막상 서브루틴이 제어권을 주지 않아서 결국엔 서브루틴 하나하나를 다 기다려야 하는 꼴입니다.</p>\n<p>서브루틴의 순서가 의도치 않게 보장됩니다 ㅋㅋ</p>\n<h3>ASYNC + Non-Blocking</h3>\n<p>메인루틴은 서브루틴을 기다리지 않습니다. 게다가 서브루틴이 종료되지 않아도 프로그램의 제어권을 바로 넘겨받아 후행 서브루틴을 바로 진행할 수 있습니다.</p>\n<p>서브루틴의 순서는 보장되지 않지만 효율적입니다.</p>","frontmatter":{"title":"동기와 비동기, 블로킹과 논블로킹","date":"2022, Feb 13","tags":["devlog"],"img":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABzklEQVQoz21Sa2+bQBDk//+YVEGqnQ+J1DamjWltqx8qSzHGxQfmdRgMxgbzmGq3OgclXmnEirubndldDe+i7/trfrlckKYp8jz/cOdwOPBZkiQoy/J6ptHhEBRN0zCKooDjOIzz+cwF6rpmRFEEz/MghICUku93XQdtWFUhyzIcj0ecTqcrAeWkihSp/23bMqqq4uLkRBsqU8R0eCvoMZEN20HFSRkFExK7bdtsa7PZsDVFSFaWyyXW6zUrJlv0JTLLsmB8N2CaJlarFSumd6yQKgwxVDh00LYNqnP9X2HdoG+Bruk5Rw8u9mEohP1+z9YUaIr0LfICXriFLHzIIkCc+4gLH8kxQJi5SFL5NpRhUG/IgpqcclGVNebbZ3xz7zAROgxPh+HqmLg6vjp3ELENjR4RgWow9ZAU0QDUalB/wyhki8voF37KB8yTJ/zwRnjZjbFInmBGD9jtHWjU4CAIEMcxE1AfCBS0Y4vFArPZDL6/AzrgT2DCjMeYy0d8WX/C818d8+QR03AMjwhvWaZ9e79OPJRLj9+eASO4x0vwGdNohGk44nyyu4eQ9u2hDBf6DRWqqoafCojsFW5mQWQriMyCe7CwTV+Rlxn+AfxFk7TejaWmAAAAAElFTkSuQmCC"},"images":{"fallback":{"src":"/static/ba428220d3e90d2fa03d025a1d97e327/7f7df/figure1.png","srcSet":"/static/ba428220d3e90d2fa03d025a1d97e327/22e35/figure1.png 750w,\n/static/ba428220d3e90d2fa03d025a1d97e327/7f7df/figure1.png 832w","sizes":"100vw"},"sources":[{"srcSet":"/static/ba428220d3e90d2fa03d025a1d97e327/49ca6/figure1.avif 750w,\n/static/ba428220d3e90d2fa03d025a1d97e327/3440f/figure1.avif 832w","type":"image/avif","sizes":"100vw"},{"srcSet":"/static/ba428220d3e90d2fa03d025a1d97e327/75934/figure1.webp 750w,\n/static/ba428220d3e90d2fa03d025a1d97e327/4a6e6/figure1.webp 832w","type":"image/webp","sizes":"100vw"}]},"width":1,"height":0.6081730769230769}}}}}},"pageContext":{"slug":"/async-nonblocking/","previous":{"fields":{"slug":"/welcome-to-donsdev/"},"frontmatter":{"title":"donsdev, 새로운 블로그 시작","tags":["devlog"],"img":null}},"next":null}},"staticQueryHashes":["2410370781","63159454"]}